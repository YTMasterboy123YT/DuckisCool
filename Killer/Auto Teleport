-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
local startButton = Instance.new("TextButton")
local stopButton = Instance.new("TextButton")

-- Properties for ScreenGui
screenGui.Parent = game.CoreGui

-- Properties for Start Button
startButton.Size = UDim2.new(0.2, 0, 0.1, 0)
startButton.Position = UDim2.new(0.3, 0, 0.4, 0)
startButton.Text = "Start Teleporting"
startButton.Parent = screenGui

-- Properties for Stop Button
stopButton.Size = UDim2.new(0.2, 0, 0.1, 0)
stopButton.Position = UDim2.new(0.5, 0, 0.4, 0)
stopButton.Text = "Stop Teleporting"
stopButton.Parent = screenGui

-- Variables for controlling teleportation
local player = game.Players.LocalPlayer
local teleporting = false
local teleportThread

local function moveHandsAboveHead(p, height)
    local character = p.Character
    if character then
        local rightArm = character:FindFirstChild("RightArm")
        local leftArm = character:FindFirstChild("LeftArm")
        local head = character:FindFirstChild("Head")
        
        if rightArm and head then
            rightArm.Position = head.Position + Vector3.new(0, height, 0)
            rightArm.Anchored = true
        end
        
        if leftArm and head then
            leftArm.Position = head.Position + Vector3.new(0, height, 0)
            leftArm.Anchored = true
        end
    end
end

local function teleportPlayers()
    local endTime = tick() + 25 -- Run for 25 seconds

    while teleporting and tick() < endTime do
        local character = player.Character or player.CharacterAdded:Wait()
        local position = character.PrimaryPart.Position -- Get the current position in each loop

        for _, p in ipairs(game.Players:GetPlayers()) do
            if p ~= player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                p.Character:SetPrimaryPartCFrame(CFrame.new(position + Vector3.new(0, 5, 0))) -- Teleport above the player's position
                moveHandsAboveHead(p, 15) -- Move hands 15 studs above the head
            end
        end
        wait(0.05) -- Faster teleportation every 0.05 seconds
    end
end

startButton.MouseButton1Click:Connect(function()
    if not teleporting then
        teleporting = true
        teleportThread = coroutine.create(teleportPlayers)
        coroutine.resume(teleportThread)
    end
end)

stopButton.MouseButton1Click:Connect(function()
    teleporting = false
end)
