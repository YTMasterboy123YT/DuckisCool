local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local button = script.Parent:WaitForChild("TextButton") -- Reference to the button
local isTeleporting = false

local function teleportAllPlayersToMe()
    local myCharacter = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local myPosition = myCharacter.PrimaryPart.Position -- Get the position of your character

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then -- Skip the local player
            local character = player.Character or player.CharacterAdded:Wait()
            if character and character:FindFirstChild("HumanoidRootPart") then
                local humanoidRootPart = character.HumanoidRootPart
                local originalCFrame = humanoidRootPart.CFrame

                -- Set the HumanoidRootPart position without affecting the limbs
                humanoidRootPart.Position = myPosition

                -- Restore the original CFrame to keep the hands in the correct position
                humanoidRootPart.CFrame = originalCFrame
            end
        end
    end
end

local function startTeleporting()
    isTeleporting = true
    print("Teleporting started.")

    while isTeleporting do
        teleportAllPlayersToMe()
        wait(0.5) -- Adjust the wait time as necessary
    end
end

local function stopTeleporting()
    isTeleporting = false
    print("Teleporting stopped.")
end

local function toggleTeleporting()
    if isTeleporting then
        stopTeleporting()
        button.Text = "Start Teleport" -- Change button text
    else
        startTeleporting()
        button.Text = "Stop Teleport" -- Change button text
    end
end

button.MouseButton1Click:Connect(toggleTeleporting) -- Connect button click to toggle function
