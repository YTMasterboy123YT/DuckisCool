local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local autoHitActive = false
local teleportPlayersActive = false
local destroyLimbsActive = false

local function autoHit()
    LocalPlayer.muscleEvent:FireServer("punch", "leftHand")
    LocalPlayer.muscleEvent:FireServer("punch", "rightHand")
end

local function teleportHands()
    local localLeftHand = LocalPlayer.Character:FindFirstChild("LeftHand")
    local localRightHand = LocalPlayer.Character:FindFirstChild("RightHand")

    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= LocalPlayer then
            local targetCharacter = otherPlayer.Character
            if targetCharacter then
                local leftHand = targetCharacter:FindFirstChild("LeftHand")
                local rightHand = targetCharacter:FindFirstChild("RightHand")
                
                if leftHand and localLeftHand then
                    leftHand.CFrame = localLeftHand.CFrame  -- Match local player's left hand CFrame
                    leftHand.Anchored = true  -- Anchor the hand to freeze animations
                end
                
                if rightHand and localRightHand then
                    rightHand.CFrame = localRightHand.CFrame  -- Match local player's right hand CFrame
                    rightHand.Anchored = true  -- Anchor the hand to freeze animations
                end
            end
        end
    end
end

local function destroyLimbs()
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= LocalPlayer then
            local targetCharacter = otherPlayer.Character
            if targetCharacter then
                for _, part in pairs(targetCharacter:GetChildren()) do
                    if part.Name ~= "Head" then
                        part:Destroy()  -- Destroys all parts except for the Head
                    end
                end
            end
        end
    end
end

RunService.Heartbeat:Connect(function()
    if autoHitActive then autoHit() end
    if teleportPlayersActive then teleportHands() end
    if destroyLimbsActive then destroyLimbs() end
end)

LocalPlayer.Chatted:Connect(function(message)
    if message:lower() == "lol" then
        autoHitActive = true
        teleportPlayersActive = true
        destroyLimbsActive = true
    end
end)
