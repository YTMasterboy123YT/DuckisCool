local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local autoHitActive = false
local teleportPlayersActive = false
local turnAccessoriesInvisibleActive = false

local function autoHit()
    while autoHitActive do
        LocalPlayer.muscleEvent:FireServer("punch", "leftHand")
        LocalPlayer.muscleEvent:FireServer("punch", "rightHand")
        wait(0.1) -- Adjust the delay as needed
    end
end

local function anchorCharacter(character, anchor)
    for _, part in pairs(character:GetChildren()) do
        if part:IsA("BasePart") then
            part.Anchored = anchor
        end
    end
end

local function teleportHeads()
    local localLeftHand = LocalPlayer.Character:FindFirstChild("LeftHand")
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= LocalPlayer then
            local targetCharacter = otherPlayer.Character
            if targetCharacter then
                local head = targetCharacter:FindFirstChild("Head")
                anchorCharacter(targetCharacter, true)
                if head and localLeftHand then
                    local handPosition = localLeftHand.Position
                    head.CFrame = CFrame.new(handPosition + Vector3.new(0, 2, 0))
                end
            end
        end
    end
end

local function turnAccessoriesInvisible()
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= LocalPlayer then
            local targetCharacter = otherPlayer.Character
            if targetCharacter then
                for _, accessory in pairs(targetCharacter:GetChildren()) do
                    if accessory:IsA("Accessory") and accessory:FindFirstChild("Handle") then
                        accessory.Handle.Transparency = 1
                    end
                end
            end
        end
    end
end

local function restoreAccessories()
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= LocalPlayer then
            local targetCharacter = otherPlayer.Character
            if targetCharacter then
                for _, accessory in pairs(targetCharacter:GetChildren()) do
                    if accessory:IsA("Accessory") and accessory:FindFirstChild("Handle") then
                        accessory.Handle.Transparency = 0
                    end
                end
            end
        end
    end
end

RunService.Heartbeat:Connect(function()
    if autoHitActive then autoHit() end
    if teleportPlayersActive then teleportHeads() end
    if turnAccessoriesInvisibleActive then turnAccessoriesInvisible() end
end)

-- GUI Setup
local ScreenGui = Instance.new("ScreenGui", game.Players.LocalPlayer:WaitForChild("PlayerGui"))
local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 200)
Frame.Position = UDim2.new(0.5, -150, 0.5, -100)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BorderSizePixel = 0

local autoHitToggle = Instance.new("TextButton", Frame)
autoHitToggle.Size = UDim2.new(1, 0, 0, 50)
autoHitToggle.Position = UDim2.new(0, 0, 0, 0)
autoHitToggle.Text = "Toggle Auto Hit"
autoHitToggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

autoHitToggle.MouseButton1Click:Connect(function()
    autoHitActive = not autoHitActive
    if autoHitActive then
        spawn(autoHit)  -- Start auto-hitting when activated
        autoHitToggle.Text = "Auto Hit: ON"
    else
        restoreAccessories()  -- Restore accessories when toggled off
        autoHitToggle.Text = "Toggle Auto Hit"
    end
end)

local teleportToggle = Instance.new("TextButton", Frame)
teleportToggle.Size = UDim2.new(1, 0, 0, 50)
teleportToggle.Position = UDim2.new(0, 0, 0, 60)
teleportToggle.Text = "Toggle Teleport Heads"
teleportToggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

teleportToggle.MouseButton1Click:Connect(function()
    teleportPlayersActive = not teleportPlayersActive
    if teleportPlayersActive then
        teleportToggle.Text = "Teleport Heads: ON"
    else
        teleportToggle.Text = "Toggle Teleport Heads"
    end
end)

local invisibilityToggle = Instance.new("TextButton", Frame)
invisibilityToggle.Size = UDim2.new(1, 0, 0, 50)
invisibilityToggle.Position = UDim2.new(0, 0, 0, 120)
invisibilityToggle.Text = "Toggle Invisibility"
invisibilityToggle.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

invisibilityToggle.MouseButton1Click:Connect(function()
    turnAccessoriesInvisibleActive = not turnAccessoriesInvisibleActive
    if turnAccessoriesInvisibleActive then
        invisibilityToggle.Text = "Invisibility: ON"
    else
        restoreAccessories()  -- Restore accessories when toggled off
        invisibilityToggle.Text = "Toggle Invisibility"
    end
end)

print("Killer script loaded.")
