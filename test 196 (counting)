-- Create a ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create a TextButton
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 200, 0, 50)
button.Position = UDim2.new(0.5, -100, 0.5, -25)
button.Text = "Teleport Rock"
button.Parent = screenGui
button.BackgroundColor3 = Color3.new(0, 0.5, 0) -- Green color
button.TextColor3 = Color3.new(1, 1, 1) -- White text

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local teleporting = false
local originalPosition = nil
local originalSize = nil

local function setHitSpeed(speed)
    local punchTool = character:FindFirstChild("Punch")
    if punchTool then
        local attackTime = punchTool:FindFirstChild("attackTime") -- Ensure this matches the property name in your tool
        if attackTime and attackTime:IsA("NumberValue") then
            attackTime.Value = speed
        end
    end
end

local function autoHit()
    while teleporting do
        local punchTool = character:FindFirstChild("Punch")
        if punchTool and punchTool.Enabled then
            punchTool:Activate()
        end
        wait(0.1) -- Adjust the delay as needed
    end
end

button.MouseButton1Click:Connect(function()
    -- Navigate to the Rock part
    local machinesFolder = game.Workspace:FindFirstChild("machinesFolder")
    if not machinesFolder then
        warn("machinesFolder not found!")
        return
    end

    local muscleKingMountain = machinesFolder:FindFirstChild("Muscle King Mountain")
    if not muscleKingMountain then
        warn("Muscle King Mountain not found!")
        return
    end

    local rockPart = muscleKingMountain:FindFirstChild("Rock")
    if not rockPart then
        warn("Rock not found!")
        return
    end

    -- Store original position and size
    originalPosition = rockPart.Position
    originalSize = rockPart.Size

    -- Navigate to rockGui inside the Rock part
    local rockGui = rockPart:FindFirstChild("rockGui")
    if rockGui then
        -- Delete all StatLabels, rockName, rockEmitter, and hoopParticle inside rockGui
        for _, child in ipairs(rockGui:GetChildren()) do
            if child:IsA("TextLabel") and (child.Name == "statLabel" or child.Name == "rockName") then
                child:Destroy()
                print(child.Name .. " deleted from rockGui.")
            end
        end
    else
        print("rockGui not found in Rock.")
    end

    -- Remove rockEmitter and hoopParticle if they exist
    local rockEmitter = rockPart:FindFirstChild("rockEmitter")
    if rockEmitter then
        rockEmitter:Destroy()
        print("rockEmitter deleted.")
    end

    local hoopParticle = rockPart:FindFirstChild("hoopParticle")
    if hoopParticle then
        hoopParticle:Destroy()
        print("hoopParticle deleted.")
    end

    -- Start or stop teleporting
    teleporting = not teleporting

    if teleporting then
        button.Text = "Stop Teleporting"
        button.BackgroundColor3 = Color3.new(1, 0.5, 0) -- Change to orange to indicate active teleporting

        -- Set the hit speed to 0.1
        setHitSpeed(0.1)

        -- Make the rock invisible
        rockPart.Transparency = 1 -- Make the rock invisible

        -- Start auto-hitting
        autoHit()

        -- Teleport the rock continuously
        while teleporting do
            if character and character:FindFirstChild("RightHand") then
                rockPart.CFrame = character.RightHand.CFrame * CFrame.new(0, 1, 0) -- Position above the right hand
            end
            wait(0.1) -- Adjust delay as needed
        end
    else
        button.Text = "Teleport Rock"
        button.BackgroundColor3 = Color3.new(0, 0.5, 0) -- Change back to green

        -- Set the rock size and position back to normal
        rockPart.Size = Vector3.new(141, 123, 149) -- Set the new size
        rockPart.Position = originalPosition -- Return to original position
        rockPart.Transparency = 0 -- Make the rock visible again
    end
end)

player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
end)
