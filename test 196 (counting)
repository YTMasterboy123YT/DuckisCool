local player = game.Players.LocalPlayer
local backpack = player:WaitForChild("Backpack")
local replicatedStorage = game:GetService("ReplicatedStorage")
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))

-- Create a button to teleport the rock and equip the tools
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 200, 0, 50)
button.Position = UDim2.new(0.5, -100, 0.5, -25)
button.Text = "Teleport Rock & Equip Tools"
button.Parent = screenGui

local function equipTool(toolName, cooldownType)
    local tool = replicatedStorage:FindFirstChild(toolName)
    if tool then
        local newTool = tool:Clone() -- Clone the tool
        newTool.Parent = backpack -- Equip the tool

        -- Set cooldown if applicable
        local cooldown = newTool:FindFirstChild(cooldownType) 
        if cooldown and cooldown:IsA("NumberValue") then
            cooldown.Value = 0.1 -- Set the cooldown for the tool
        end
    else
        warn(toolName .. " not found in ReplicatedStorage!")
    end
end

local function autoLift()
    while true do
        local punchTool = backpack:FindFirstChild("Punch")
        local pushupsTool = backpack:FindFirstChild("Pushups")

        -- Activate the Punch tool if it's equipped
        if punchTool and punchTool.Enabled then
            punchTool:Activate()
        end

        -- Activate the Pushups tool if it's equipped
        if pushupsTool and pushupsTool.Enabled then
            pushupsTool:Activate()
        end
        
        wait(0.1) -- Adjust this to control the frequency of activation
    end
end

local function setupMuscleKingMountain()
    local machinesFolder = game.Workspace:FindFirstChild("machinesFolder")
    if not machinesFolder then
        warn("machinesFolder not found!")
        return
    end

    local muscleKingMountain = machinesFolder:FindFirstChild("Muscle King Mountain")
    if not muscleKingMountain then
        warn("Muscle King Mountain not found!")
        return
    end

    local rockPart = muscleKingMountain:FindFirstChild("Rock")
    if not rockPart then
        warn("Rock not found!")
        return
    end
    
    local rockGui = rockPart:FindFirstChild("rockGui")
    if not rockGui then
        warn("rockGui not found!")
        return
    end

    -- Teleport the rock to the player's right hand CFrame
    rockPart.CFrame = character.RightHand.CFrame * CFrame.new(0, 1, 0) -- Position above the right hand
    rockPart.Size = Vector3.new(2, 2, 2) -- Set size when activated
end

button.MouseButton1Click:Connect(function()
    -- Ensure character is loaded before equipping tools
    if player.Character then
        equipTool("Punch", "attackTime")
        equipTool("Pushups", "repTime")
        setupMuscleKingMountain() -- Setup the Muscle King Mountain
        autoLift() -- Start auto-hitting
    else
        warn("Character not found!")
    end
end)

-- Initial character setup
local character = player.Character or player.CharacterAdded:Wait()

-- Reset for new characters
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    backpack = player:WaitForChild("Backpack")
end)
